## redis

### redis-benchmark使用

#### 1. 使用 redis benchmark 工具, 测试 10 20 50 100 200 1k 5k 字节 value 大小，redis get set 性能。

**Ubuntu Desktop, 32G, i7-9700K 8Core 3.60GHz**

> get
>
> redis-benchmark -h 127.0.0.1 -p 6379 -n 100000 -c 20 -d 10 -t get

| value大小/Byte | 并发连接数/20 | 并发连接数/100 | 并发连接数/1000 | 并发连接数/5000 | 并发连接数/10000 |
| -------------- | ------------- | -------------- | --------------- | --------------- | ---------------- |
| 10             | 164403.56     | 159672.25      | 115952.22       | 92705.442       | 82257.018        |
| 20             | 169918.95     | 160111.442     | 113270.488      | 89769.906       | 85838.878        |
| 50             | 167611.244    | 157948.808     | 110542.084      | 89763.782       | 90261.274        |
| 100            | 175112.71     | 174034.686     | 109055.49       | 102500.66       | 90272.346        |
| 200            | 170738.112    | 161454.146     | 112077.754      | 92878.794       | 89599.19         |
| 1024           | 166185.332    | 159779.134     | 111219.278      | 97570.504       | 84287.782        |
| 5120           | 166343.692    | 163018.222     | 112286.34       | 96089.594       | 83052.626        |

>set
>
>redis-benchmark -h 127.0.0.1 -p 6379 -n 100000 -c 20 -d 10 -t set

| value大小/Byte | 并发连接数/20 | 并发连接数/100 | 并发连接数/1000 | 并发连接数/5000 | 并发连接数/10000 |
| -------------- | ------------- | -------------- | --------------- | --------------- | ---------------- |
| 10             | 178687.064    | 149465.588     | 120738.628      | 82604.72        | 93363.312        |
| 20             | 172919.754    | 150984.98      | 130914.494      | 87657.334       | 94443.476        |
| 50             | 183595.416    | 159954.372     | 126001.474      | 85667.244       | 98108.1          |
| 100            | 174260.63     | 149986.156     | 121376.59       | 86961.54        | 91083.664        |
| 200            | 161978.3      | 144783.862     | 116360.398      | 88730.662       | 98886.222        |
| 1024           | 166067.274    | 142312.504     | 116911.7        | 90662.65        | 95132.896        |
| 5120           | 152572.912    | 126029.244     | 108141.162      | 82902.038       | 88725.882        |

**Raspberry Pi 4 Model B Rev 1.1, 8G, 4Core 1.5GHz**

#### 2. 写入一定量的 kv 数据, 根据数据大小 1w-50w 自己评估, 结合写入前后的 info memory 信息  , 分析上述不同 value 大小下，平均每个 key 的占用内存空间。

 